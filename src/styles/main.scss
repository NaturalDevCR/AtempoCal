@use 'sass:color';

// AtempoCal Main SCSS - Comprehensive styling system
// Framework-agnostic SCSS implementation replacing Tailwind CSS

// ===== VARIABLES =====

// Color palette
$primary-50: #eff6ff;
$primary-100: #dbeafe;
$primary-200: #bfdbfe;
$primary-300: #93c5fd;
$primary-400: #60a5fa;
$primary-500: #3b82f6;
$primary-600: #2563eb;
$primary-700: #1d4ed8;
$primary-800: #1e40af;
$primary-900: #1e3a8a;
$primary-950: #172554;

// Gray colors
$gray-50: #f9fafb;
$gray-100: #f3f4f6;
$gray-200: #e5e7eb;
$gray-300: #d1d5db;
$gray-400: #9ca3af;
$gray-500: #6b7280;
$gray-600: #4b5563;
$gray-700: #374151;
$gray-800: #1f2937;
$gray-900: #111827;
$gray-950: #030712;

// Semantic colors
$red-400: #f87171;
$red-500: #ef4444;
$red-600: #dc2626;
$red-700: #b91c1c;
$green-400: #4ade80;
$green-500: #22c55e;
$green-600: #16a34a;
$blue-50: #eff6ff;
$blue-500: #3b82f6;
$blue-900: #1e3a8a;
$yellow-400: #facc15;
$yellow-500: #eab308;
$yellow-600: #ca8a04;

// Event colors
$event-blue: #3b82f6;
$event-emerald: #10b981;
$event-red: #ef4444;
$event-amber: #f59e0b;
$event-violet: #8b5cf6;
$event-indigo: #6366f1;
$event-pink: #ec4899;
$event-gray: #6b7280;
$event-cyan: #06b6d4;
$event-lime: #84cc16;
$event-orange: #f97316;
$event-teal: #14b8a6;
$event-rose: #f43f5e;
$event-purple: #a855f7;
$event-green: #22c55e;
$event-yellow: #eab308;
$event-sky: #0ea5e9;

// Spacing
$spacing-xs: 0.25rem;
$spacing-sm: 0.5rem;
$spacing-md: 1rem;
$spacing-lg: 1.5rem;
$spacing-xl: 2rem;
$spacing-2xl: 3rem;

// Typography
$font-size-xs: 0.75rem;
$font-size-sm: 0.875rem;
$font-size-base: 1rem;
$font-size-lg: 1.125rem;
$font-size-xl: 1.25rem;
$font-size-2xl: 1.5rem;

$font-weight-normal: 400;
$font-weight-medium: 500;
$font-weight-semibold: 600;
$font-weight-bold: 700;

$line-height-tight: 1.25;
$line-height-normal: 1.5;
$letter-spacing-wide: 0.025em;

// Border radius
$border-radius-sm: 0.125rem;
$border-radius-md: 0.375rem;
$border-radius-lg: 0.5rem;

// Shadows
$shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
$shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
$shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);

// Transitions
$transition-duration-base: 150ms;
$transition-all: all 150ms ease;
$transition-colors: color 150ms ease, background-color 150ms ease, border-color 150ms ease;

// Z-index
$z-index-dropdown: 1000;
$z-index-modal: 1050;
$z-index-tooltip: 1100;

// Breakpoints
$breakpoint-mobile: 768px;
$breakpoint-tablet: 1024px;
$breakpoint-desktop: 1280px;

// ===== MIXINS =====

// Flexbox mixins
@mixin flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

@mixin flex-between {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

@mixin flex-column {
  display: flex;
  flex-direction: column;
}

// Positioning mixins
@mixin absolute-full {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}

@mixin relative-full {
  position: relative;
  width: 100%;
  height: 100%;
}

// Text utilities
@mixin truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

// Responsive mixins
@mixin mobile {
  @media (max-width: #{$breakpoint-mobile - 1px}) {
    @content;
  }
}

@mixin tablet {
  @media (min-width: #{$breakpoint-mobile}) and (max-width: #{$breakpoint-tablet - 1px}) {
    @content;
  }
}

@mixin desktop {
  @media (min-width: #{$breakpoint-tablet}) {
    @content;
  }
}

// Theme-aware mixin
@mixin theme-aware($property, $values) {
  #{$property}: map-get($values, light);
  
  .dark & {
    #{$property}: map-get($values, dark);
  }
}

// Event type styling mixin
@mixin event-type-style($color) {
  background-color: color.mix($color, white, 10%);
  border-left-color: $color;
  
  .dark & {
    background-color: color.mix($color, black, 30%);
  }
}

// Event color theme mixin for EventCard
@mixin event-color-theme($color) {
  background-color: color.mix($color, white, 90%);
  color: color.mix($color, black, 90%);
  
  .dark & {
    background-color: color.mix($color, black, 70%);
    color: color.mix($color, white, 90%);
  }
}

// ===== THEME SYSTEM =====

// CSS Custom Properties for theme support
:root {
  // Light theme colors
  --atempo-bg-primary: #{$gray-50};
  --atempo-bg-secondary: #{$gray-100};
  --atempo-text-primary: #{$gray-900};
  --atempo-text-secondary: #{$gray-600};
  --atempo-text-tertiary: #{$gray-400};
  --atempo-border-primary: #{$gray-200};
  --atempo-border-secondary: #{$gray-300};
  --atempo-accent-primary: #{$primary-500};
  --atempo-success: #{$green-500};
  --atempo-warning: #{$yellow-500};
  --atempo-error: #{$red-500};
  --atempo-shadow: rgba(0, 0, 0, 0.1);
  --atempo-shadow-lg: rgba(0, 0, 0, 0.15);
  --atempo-header-bg: white;
}

// Dark theme
.dark {
  --atempo-bg-primary: #{$gray-900};
  --atempo-bg-secondary: #{$gray-800};
  --atempo-text-primary: #{$gray-50};
  --atempo-text-secondary: #{$gray-300};
  --atempo-text-tertiary: #{$gray-400};
  --atempo-border-primary: #{$gray-700};
  --atempo-border-secondary: #{$gray-600};
  --atempo-accent-primary: #{$primary-400};
  --atempo-success: #{$green-400};
  --atempo-warning: #{$yellow-400};
  --atempo-error: #{$red-400};
  --atempo-shadow: rgba(0, 0, 0, 0.3);
  --atempo-shadow-lg: rgba(0, 0, 0, 0.4);
  --atempo-header-bg: #{$gray-800};
}

// ===== COMPONENT STYLES =====

// Base calendar container
.atempo-cal {
  font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
  font-size: $font-size-sm;
  background-color: var(--atempo-bg-primary);
  color: var(--atempo-text-primary);
  box-sizing: border-box !important;
  border-radius: $border-radius-lg;
  box-shadow: $shadow-sm;
  border: 1px solid var(--atempo-border-primary) !important;
  overflow: hidden;
  
  *,
  *::before,
  *::after {
    box-sizing: border-box !important;
  }
}

// Navigation styles
.atempo-cal-nav {
  @include flex-between;
  padding: $spacing-md;
  border-bottom: 1px solid var(--atempo-border-primary);
  background-color: var(--atempo-header-bg);
}

.atempo-cal-nav-button {
  @include flex-center;
  padding: $spacing-sm $spacing-md;
  border: 1px solid var(--atempo-border-secondary);
  border-radius: $border-radius-md;
  font-size: $font-size-sm;
  font-weight: $font-weight-medium;
  color: var(--atempo-text-primary);
  background-color: var(--atempo-bg-primary);
  transition: $transition-all;
  cursor: pointer;
  
  &:hover {
    background-color: var(--atempo-bg-secondary);
  }
  
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
}

// Weekly view styles
.weekly-view {
  @include flex-column;
  height: 100%;
  background-color: var(--atempo-bg-primary);
  color: var(--atempo-text-primary);
  border: 1px solid var(--atempo-border-primary) !important;
  will-change: scroll-position;
  transform: translateZ(0);
}

.week-header {
  display: flex;
  border-bottom: 1px solid var(--atempo-border-primary);
  background-color: var(--atempo-header-bg);
}

.resource-spacer {
  width: 160px;
  min-width: 160px;
  @include flex-center;
  padding: $spacing-md;
  background-color: var(--atempo-bg-secondary);
  border-right: 1px solid var(--atempo-border-primary);
  font-weight: $font-weight-medium;
  color: var(--atempo-text-primary);
}

.day-headers {
  flex: 1;
  display: flex;
}

.day-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  width: 100%;
}

.day-header {
  @include flex-column;
  @include flex-center;
  padding: $spacing-md;
  border-right: 1px solid var(--atempo-border-primary);
  background-color: var(--atempo-bg-primary);
  cursor: pointer;
  transition: $transition-colors;
  
  &:hover {
    background-color: var(--atempo-bg-secondary);
  }
  
  &.is-today {
    background-color: color.mix($primary-500, white, 5%);
    color: $primary-600;
  }
  
  &.is-weekend {
    background-color: color.mix($gray-500, white, 3%);
  }
}

.day-name {
  font-size: $font-size-xs;
  font-weight: $font-weight-medium;
  text-transform: uppercase;
  letter-spacing: $letter-spacing-wide;
  color: var(--atempo-text-secondary);
}

.day-date {
  font-size: $font-size-lg;
  font-weight: $font-weight-semibold;
  margin-top: $spacing-xs;
  color: var(--atempo-text-primary);
}

// Resource rows
.resource-container {
  flex: 1;
  overflow-y: auto;
}

.resource-row {
  display: flex;
  border-bottom: 1px solid var(--atempo-border-primary);
  min-height: 60px;
}

.resource-info {
  width: 160px;
  min-width: 160px;
  @include flex-center;
  padding: $spacing-sm;
  background-color: var(--atempo-bg-secondary);
  border-right: 1px solid var(--atempo-border-primary);
}

.resource-content {
  @include flex-center;
  gap: $spacing-sm;
  width: 100%;
}

.resource-indicator {
  width: $spacing-sm;
  height: $spacing-sm;
  border-radius: 50%;
  flex-shrink: 0;
}

.resource-details {
  @include flex-column;
  margin-left: $spacing-sm;
  min-width: 0;
}

.resource-name {
  font-size: $font-size-sm;
  font-weight: $font-weight-medium;
  color: var(--atempo-text-primary);
  @include truncate;
}

.resource-role {
  font-size: $font-size-xs;
  color: var(--atempo-text-secondary);
  @include truncate;
}

.resource-days {
  display: flex;
  flex: 1;
  position: relative;
}

.day-cell {
  flex: 1;
  position: relative;
  cursor: pointer;
  transition: $transition-colors;
  border-right: 1px solid var(--atempo-border-primary) !important;
  border-top: 1px solid var(--atempo-border-secondary) !important;
  min-height: 60px;
  
  &:hover {
    background-color: var(--atempo-bg-secondary);
  }
  
  &.is-today {
    background-color: color.mix($primary-500, white, 5%);
  }
  
  &.is-weekend {
    background-color: color.mix($gray-500, white, 3%);
  }
}

// Event styles
.events-stack {
  @include relative-full;
}

.stacked-event {
  position: absolute;
  will-change: transform;
  transform: translateZ(0);
}

.event-bar {
  width: 100%;
  height: 100%;
  border-radius: $border-radius-md;
  box-shadow: $shadow-sm;
  border-left: 4px solid var(--atempo-accent-primary);
  padding: $spacing-xs $spacing-sm;
  cursor: pointer;
  @include flex-between;
  color: var(--atempo-text-primary);
  background-color: color.mix($primary-500, white, 10%);
  transition: $transition-all;
  will-change: transform;
  transform: translateZ(0);
  
  &:hover {
    box-shadow: $shadow-lg;
  }
  
  // Event type styles
  &.shift-morning {
    @include event-type-style($event-blue);
  }
  
  &.shift-day {
    @include event-type-style($event-emerald);
  }
  
  &.shift-evening {
    @include event-type-style($event-amber);
  }
  
  &.shift-night {
    @include event-type-style($event-purple);
  }
  
  &.meeting {
    @include event-type-style($event-red);
  }
  
  &.training {
    @include event-type-style($event-orange);
  }
  
  &.time-off {
    @include event-type-style($event-green);
  }
  
  &.maintenance {
    @include event-type-style($event-yellow);
  }
  
  &.administrative {
    @include event-type-style($event-indigo);
  }
}

.event-title {
  font-size: $font-size-xs;
  font-weight: $font-weight-medium;
  @include truncate;
  flex: 1;
  color: var(--atempo-text-primary);
}

.event-time {
  font-size: $font-size-xs;
  opacity: 0.85;
  margin-left: $spacing-sm;
  flex-shrink: 0;
  color: var(--atempo-text-primary);
  font-weight: $font-weight-medium;
}

// Responsive adjustments
@include mobile {
  .day-header {
    padding: $spacing-xs;
    height: 60px;
  }
  
  .day-name {
    font-size: $font-size-xs;
  }
  
  .day-date {
    font-size: $font-size-sm;
  }
  
  .resource-spacer {
    height: 60px;
  }
}

// ===== UTILITY CLASSES =====

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

// Focus styles for accessibility
.focus\:outline-none:focus {
  outline: none;
}

.focus\:ring:focus {
  box-shadow: 0 0 0 2px var(--atempo-accent-primary);
}

// Animation utilities
@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.animate-spin {
  animation: spin 1s linear infinite;
}

// Print styles
@media print {
  .atempo-cal {
    box-shadow: none;
    border: 1px solid #000 !important;
  }
  
  .day-cell {
    border: 1px solid #000 !important;
  }
}

// High contrast mode
@media (prefers-contrast: high) {
  .atempo-cal {
    border-width: 2px !important;
  }
  
  .event-bar {
    border-left-width: 6px;
  }
}

// Reduced motion
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}